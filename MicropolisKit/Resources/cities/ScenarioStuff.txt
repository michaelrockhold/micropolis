///////////////////////////////////////////////////
// Scenarios

/** Available scenarios */
enum Scenario {
    SC_NONE,           ///< No scenario (free playing)

    SC_DULLSVILLE,     ///< Dullsville (boredom)
    SC_SAN_FRANCISCO,  ///< San francisco (earthquake)
    SC_HAMBURG,        ///< Hamburg (fire bombs)
    SC_BERN,           ///< Bern (traffic)
    SC_TOKYO,          ///< Tokyo (scary monster)
    SC_DETROIT,        ///< Detroit (crime)
    SC_BOSTON,         ///< Boston (nuclear meltdown)
    SC_RIO,            ///< Rio (flooding)

    SC_COUNT,          ///< Number of scenarios
};







        50: {
            'id': 1,
            'color': 0x7f7fff,
            'title': 'DULLSVILLE, USA  1900',
            'description': """Things haven't changed much around here in the last hundred years or so and the residents are beginning to get bored. They think Dullsville could be the next great city with the right leader.

It is your job to attract new growth and development, turning Dullsville into a Metropolis within 30 years.""",
        },

        51: {
            'id': 2,
            'color': 0x7f7fff,
            'title': 'SAN FRANCISCO, CA.  1906',
            'description': """Damage from the earthquake was minor compared to that of the ensuing fires, which took days to control. 1500 people died.

Controlling the fires should be your initial concern. Then clear the rubble and start rebuilding. You have 5 years.""",
        },

        52: {
            'id': 3,
            'color': 0x7f7fff,
            'title': 'HAMBURG, GERMANY  1944',
            'description': """Allied fire-bombing of German cities in WWII caused tremendous damage and loss of life. People living in the inner cities were at greatest risk.

You must control the firestorms during the bombing and then rebuild the city after the war. You have 5 years.""",
        },

        53: {
            'id': 4,
            'color': 0x7f7fff,
            'title': 'BERN, SWITZERLAND  1965',
            'description': """The roads here are becoming more congested every day, and the residents are upset. They demand that you do something about it.

Some have suggested a mass transit system as the answer, but this would require major rezoning in the downtown area. You have 10 years.""",
        },

        54: {
            'id': 5,
            'color': 0x7f7fff,
            'title': 'TOKYO, JAPAN  1957',
            'description': """A large reptilian creature has been spotted heading for Tokyo bay. It seems to be attracted to the heavy levels of industrial pollution there.

Try to control the fires, then rebuild the industrial center. You have 5 years.""",
        },

        55: {
            'id': 6,
            'color': 0x7f7fff,
            'title': 'DETROIT, MI.  1972',
            'description': """By 1970, competition from overseas and other economic factors pushed the once "automobile capital of the world" into recession. Plummeting land values and unemployment then increased crime in the inner-city to chronic levels.

You have 10 years to reduce crime and rebuild the industrial base of the city."""
        },

        56: {
            'id': 7,
            'color': 0x7f7fff,
            'title': 'BOSTON, MA.  2010',
            'description': """A major meltdown is about to occur at one of the new downtown nuclear reactors. The area in the vicinity of the reactor will be severly contaminated by radiation, forcing you to restructure the city around it.

You have 5 years to get the situation under control.""",
        },

        57: {
            'id': 8,
            'color': 0x7f7fff,
            'title': 'RIO DE JANEIRO, BRAZIL  2047',
            'description': """In the mid-21st century, the greenhouse effect raised global temperatures 6 degrees F. Polar icecaps melted and raised sea levels worldwide. Coastal areas were devastated by flood and erosion.

You have 10 years to turn this swamp back into a city again.""",
        },

    }


    scenarios = [
        None, # SC_NONE
        {
            'id': micropolisengine.SC_DULLSVILLE,
            'title': 'Dullsville, USA  1900',
            'description': """Things haven't changed much around here in the last hundred years or so and the residents are beginning to get bored. They think Dullsville could be the next great city with the right leader.

It is your job to attract new growth and development, turning Dullsville into a Metropolis within 30 years.""",
        },
        {
            'id': micropolisengine.SC_SAN_FRANCISCO,
            'title': 'San Francisco, CA.  1906',
            'description': """Damage from the earthquake was minor compared to that of the ensuing fires, which took days to control. 1500 people died.

Controlling the fires should be your initial concern. Then clear the rubble and start rebuilding. You have 5 years.""",
        },
        {
            'id': micropolisengine.SC_HAMBURG,
            'title': 'Hamburg, Germany  1944',
            'description': """Allied fire-bombing of German cities in WWII caused tremendous damage and loss of life. People living in the inner cities were at greatest risk.

You must control the firestorms during the bombing and then rebuild the city after the war. You have 5 years.""",
        },
        {
            'id': micropolisengine.SC_BERN,
            'title': 'Bern, Switzerland  1965',
            'description': """The roads here are becoming more congested every day, and the residents are upset. They demand that you do something about it.

Some have suggested a mass transit system as the answer, but this would require major rezoning in the downtown area. You have 10 years.""",
        },
        {
            'id': micropolisengine.SC_TOKYO,
            'title': 'Tokyo, Japan  1957',
            'description': """A large reptilian creature has been spotted heading for Tokyo bay. It seems to be attracted to the heavy levels of industrial pollution there.

Try to control the fires, then rebuild the industrial center. You have 5 years.""",
        },
        {
            'id': micropolisengine.SC_DETROIT,
            'title': 'Detroit, MI.  1972',
            'description': """By 1970, competition from overseas and other economic factors pushed the once "automobile capital of the world" into recession. Plummeting land values and unemployment then increased crime in the inner-city to chronic levels.

You have 10 years to reduce crime and rebuild the industrial base of the city."""
        },
        {
            'id': micropolisengine.SC_BOSTON,
            'title': 'Boston, MA.  2010',
            'description': """A major meltdown is about to occur at one of the new downtown nuclear reactors. The area in the vicinity of the reactor will be severly contaminated by radiation, forcing you to restructure the city around it.

You have 5 years to get the situation under control.""",
        },
        {
            'id': micropolisengine.SC_RIO,
            'title': 'Rio de Janeiro, Brazil  2047',
            'description': """In the mid-21st century, the greenhouse effect raised global temperatures 6 degrees F. Polar icecaps melted and raised sea levels worldwide. Coastal areas were devastated by flood and erosion.

You have 10 years to turn this swamp back into a city again.""",
        },

void Micropolis::loadScenario(Scenario s)
{
    const char *name = NULL;
    const char *fname = NULL;

    cityFileName = "";

    setGameLevel(LEVEL_EASY);

    if (s < SC_DULLSVILLE || s > SC_RIO) {
        s = SC_DULLSVILLE;
    }

    switch (s) {
        case SC_DULLSVILLE:
            name = "Dullsville";
            fname = "snro.111";
            scenario = SC_DULLSVILLE;
            cityTime = ((1900 - 1900) * 48) + 2;
            setFunds(5000);
            break;
        case SC_SAN_FRANCISCO:
            name = "San Francisco";
            fname = "snro.222";
            scenario = SC_SAN_FRANCISCO;
            cityTime = ((1906 - 1900) * 48) + 2;
            setFunds(20000);
            break;
        case SC_HAMBURG:
            name = "Hamburg";
            fname = "snro.333";
            scenario = SC_HAMBURG;
            cityTime = ((1944 - 1900) * 48) + 2;
            setFunds(20000);
            break;
        case SC_BERN:
            name = "Bern";
            fname = "snro.444";
            scenario = SC_BERN;
            cityTime = ((1965 - 1900) * 48) + 2;
            setFunds(20000);
            break;
        case SC_TOKYO:
            name = "Tokyo";
            fname = "snro.555";
            scenario = SC_TOKYO;
            cityTime = ((1957 - 1900) * 48) + 2;
            setFunds(20000);
            break;
        case SC_DETROIT:
            name = "Detroit";
            fname = "snro.666";
            scenario = SC_DETROIT;
            cityTime = ((1972 - 1900) * 48) + 2;
            setFunds(20000);
            break;
        case SC_BOSTON:
            name = "Boston";
            fname = "snro.777";
            scenario = SC_BOSTON;
            cityTime = ((2010 - 1900) * 48) + 2;
            setFunds(20000);
            break;
        case SC_RIO:
            name = "Rio de Janeiro";
            fname = "snro.888";
            scenario = SC_RIO;
            cityTime = ((2047 - 1900) * 48) + 2;
            setFunds(20000);
            break;
        default:
            NOT_REACHED();
            break;
    }


    // Disaster delay table for each scenario
    static const short disasterWaitTable[SC_COUNT] = {
        0,          // No scenario (free playing)
        2,          // Dullsville (boredom)
        10,         // San francisco (earth quake)
        4 * 10,     // Hamburg (fire bombs)
        20,         // Bern (traffic)
        3,          // Tokyo (scary monster)
        5,          // Detroit (crime)
        5,          // Boston (nuclear meltdown)
        2 * 48,     // Rio (flooding)
    };

    // Time to wait before score calculation for each scenario
    static const short scoreWaitTable[SC_COUNT] = {
        0,          // No scenario (free playing)
        30 * 48,    // Dullsville (boredom)
        5 * 48,     // San francisco (earth quake)
        5 * 48,     // Hamburg (fire bombs)
        10 * 48,    // Bern (traffic)
        5 * 48,     // Tokyo (scary monster)
        10 * 48,    // Detroit (crime)
        5 * 48,     // Boston (nuclear meltdown)
        10 * 48,    // Rio (flooding)
    };


doShipSprite() etc
            if (scenario == SC_SAN_FRANCISCO && getRandom(10) < 5) {
                makeSound("city", "FogHornLow", shipX, shipY);
            } else {
                makeSound("city", "HonkHonkLow", shipX, shipY);
            }



/** Let disasters of the scenario happen */
void Micropolis::scenarioDisaster()
{
    if (disasterWait < 0) return;
    
    switch (scenario) {
        case SC_DULLSVILLE:
            break;

        case SC_SAN_FRANCISCO:
            if (disasterWait == 1) {
                makeEarthquake();
            }
            break;

        case SC_HAMBURG:
            if (disasterWait % 10 == 0) {
                makeFireBombs();
            }
            break;

        case SC_BERN:
            break;

        case SC_TOKYO:
            if (disasterWait == 1) {
                makeMonster();
            }
            break;

        case SC_DETROIT:
            break;

        case SC_BOSTON:
            if (disasterWait == 1) {
                makeMeltdown();
            }
            break;

        case SC_RIO:
            if ((disasterWait % 24) == 0) {
                makeFlood();
            }
            break;

        default:
            NOT_REACHED();
            break; // Never used
    }

    if (disasterWait > 0) {
        disasterWait--;
    } else {
        scenario = SC_NONE;
    }
}

/**
 * Compute score for each scenario
 * @param type Scenario used
 * @note Parameter \a type may not be \c SC_NONE
 */
void Micropolis::doScenarioScore(Scenario type)
{
    enum MessageNumber z = MESSAGE_SCENARIO_LOST;     /* you lose */

    switch (type) {

    case SC_DULLSVILLE:
        if (cityClass >= CC_METROPOLIS) {
            z = MESSAGE_SCENARIO_WON;
        }
        break;

    case SC_SAN_FRANCISCO:
        if (cityClass >= CC_METROPOLIS) {
            z = MESSAGE_SCENARIO_WON;
        }
        break;

    case SC_HAMBURG:
        if (cityClass >= CC_METROPOLIS) {
            z = MESSAGE_SCENARIO_WON;
        }
        break;

    case SC_BERN:
        if (trafficAverage < 80) {
            z = MESSAGE_SCENARIO_WON;
        }
        break;

    case SC_TOKYO:
        if (cityScore > 500) {
            z = MESSAGE_SCENARIO_WON;
        }
        break;

    case SC_DETROIT:
        if (crimeAverage < 60) {
            z = MESSAGE_SCENARIO_WON;
        }
        break;

    case SC_BOSTON:
        if (cityScore > 500) {
            z = MESSAGE_SCENARIO_WON;
        }
        break;

    case SC_RIO:
        if (cityScore > 500) {
            z = MESSAGE_SCENARIO_WON;
        }
        break;

    default:
        NOT_REACHED();
        break;

    }

    sendMessage(z, NOWHERE, NOWHERE, true, true);

    if (z == MESSAGE_SCENARIO_LOST) {
        doLoseGame();
    }
}
